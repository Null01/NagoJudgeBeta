<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    template="/home.xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core">


    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam name="idProblem"
                         value="#{problemsBean.problemView.idProblem}"
                         required="true"/>
            <f:event type="preRenderView"
                     listener="#{problemsBean.actionPreRenderViewToSubmitProblem}" />
        </f:metadata>
    </ui:define>

    <ui:define name="content">

        <ui:fragment rendered="#{problemsBean.problemView.idProblem != 0}">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title text-center">#{utilBean.formatIdProblem(problemsBean.problemView.idProblem)} - #{problemsBean.problemView.nameProblem}</h3>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <iframe src="#{problemsBean.pathSourceProblem}"
                                style="width: 100%;"
                                height="600"
                                rendered="#{problemsBean.pathSourceProblem != null}"></iframe>
                    </div>
                </div>
            </div>


            <div id="panelMySubmitsContest" class="panel panel-default">
                <div class="panel panel-default">
                    <div class="panel-heading"></div>
                    <div class="panel-body">
                        <h:form id="form-submit-sourcecode" class="form-horizontal" enctype="multipart/form-data">
                            <p:messages id="msgs" autoUpdate="true" closable="true"/>
                            <fieldset>
                                <div class="form-group">
                                    <label for="nameProblem" class="col-md-1 control-label">Problem</label>
                                    <div class="col-md-2">
                                        <p:inputText id="nameProblem"
                                                     styleClass="form-control"
                                                     readonly="true"
                                                     value="#{utilBean.formatIdProblem(submitBean.problemView.idProblem)} - #{submitBean.problemView.nameProblem}"/>
                                    </div>
                                    <label for="select-language" class="col-md-1 control-label">Lenguaje</label>
                                    <div class="col-md-3">
                                        <p:selectOneMenu id="select-language"
                                                         styleClass="form-control"
                                                         style="width: 100%;"
                                                         converter="languageProgrammingConvertJSF"
                                                         value="#{submitBean.languageProgrammingView}"
                                                         required="true" >
                                            <f:selectItems value="#{languageBean.listLanguageProgrammingItems}" />                                               
                                        </p:selectOneMenu>
                                    </div>
                                    <label for="upload-sourceCode" class="col-md-1 control-label">Codigo Fuente</label>
                                    <div class="col-md-4">
                                        <p:fileUpload id="upload-sourceCode"
                                                      styleClass="form-control center-block"
                                                      value="#{submitBean.codeSourceFile}"
                                                      mode="simple"
                                                      skinSimple="false"
                                                      required="true"
                                                      allowTypes="/(\.|\/)(java|cpp|c)$/"
                                                      label="#{msg['general.label.archivo.upload']}"/>
                                    </div>

                                </div>
                                <div class="form-group text-center">
                                    <p:commandButton styleClass="btn btn-default btn-sm center-block text-center col-md-12"
                                                     value="Send solution"
                                                     ajax="false"
                                                     action="#{submitBean.actionSubmitSolution}"
                                                     update="messages, @form"/>
                                </div>
                            </fieldset>
                        </h:form>
                    </div>
                </div>
            </div>

        </ui:fragment>

    </ui:define>
</ui:composition>
